common:
  speed:
    slowly: &SLOWLY
      speed: 0.15
      accel: 0.1
      timeout: 15.
    normally: &NORMALLY
      speed: 0.4
      accel: 0.3
      timeout: 3
    quickly: &QUICKLY
      speed: 0.6
      accel: 0.6
      timeout: 7.

  tolerance:
    small_tolerance: &SMALL_TOLERANCE
      tolerance_joints: [ 0.005, 0.008, 0.015, 0.1, 0.1, 0.1, 0.05 ]
    normal_tolerance: &NORMAL_TOLERANCE
      tolerance_joints: [ 0.01, 0.010, 0.015, 0.3, 0.2, 0.15, 0.1 ]
    bigger_tolerance: &BIGGER_TOLERANCE
      tolerance_joints: [ 0.005, 0.010, 0.01, 0.3, 0.2, 0.2 ]
    max_tolerance: &MAX_TOLERANCE
      tolerance_joints: [ 0.03, 0.03, 0.03, 0.3, 0.3, 0.3 ]

  joint1:
    mechanical:
      down_position: &JOINT1_DOWN_POSITION
                       0.02
      small_ready: &JOINT1_SMALL_READY
                      0.16
      up_pos: &JOINT1_UP_POS
                   0.312
      small_ready_store: &JOINT1_SMALL_READY_STORE
                   0.17
      bin_get_stone: &JOINT1_BIN_GET_STONE
                     0.142
      big_ready: &JOINT1_BIG_READY
                     0.006
      big_adjust_mid: &JOINT1_BIG_ADJUST_MID
                      0.08
      big_up_pos: &JOINT1_BIG_UP_POS
                      0.320
      big_ready_store: &JOINT1_BIG_READY_STORE
                      0.155
    home:
      zero_stone_position: &JOINT1_ZERO_STONE_POSITION
                             0.01
      one_stone_position: &JOINT1_ONE_STONE_POSITION
                            0.156
      two_stone_position: &JOINT1_TWO_STONE_POSITION
                            0.22
      three_stone_position: &JOINT1_THREE_STONE_POSITION
                              0.22

  joint2:
    mechanical:
      back_position: &JOINT2_BACK_POSITION
                       0.01
      get_ore_position: &JOINT2_GET_ORE_POSITION
                           0.1
      furthest_position: &JOINT2_FURTHEST_POSITION
                           0.232
      exchange_position: &JOINT2_EXCHANGE_POSITION
                          0.07
      small_arm_up: &JOINT2_SMALL_ARM_UP
                            0.085
      small_store_stone: &JOINT2_SMALL_STORE_STONE
                              0.02
      small_ready_second: &JOINT2_SMALL_READY_SECOND
                              0.142
      bin_get_stone: &JOINT2_BIN_GET_STONE
                            0.087
      back_bin_position: &JOINT2_BACK_BIN_POSITION
                             0.001
      big_ready: &JOINT2_BIG_READY
                       0.009
      big_arm_up: &JOINT2_BIG_ARM_UP
                    0.142
      big_ready_store: &JOINT2_BIG_READY_STORE
                      0.020

  joint3:
    mechanical:
      left_position: &JOINT3_L_POSITION
                       0.28
      mid_position: &JOINT3_MID_POSITION
                      0.04
      right_position: &JOINT3_R_POSITION
                        -0.275
      home: &JOINT3_HOME_POS
        0.08
      small_ready: &JOINT3_SMALL_READY
                        0.208
      small_ready_second: &JOINT3_SMALL_READY_SECOND
                        0.03
      small_get_stone: &JOINT3_SMALL_GET_STONE
                            0.047
      small_get_stone2: &JOINT3_SMALL_GET_STONE2
                            0.056
      small_get_second: &JOINT3_SMALL_GET_SECOND
                            -0.018
      small_store_stone: &JOINT3_SMALL_STORE_STONE
                              0.291
      bin_get_stone: &JOINT3_BIN_GET_STONE
                          0.258
      big_ready: &JOINT3_BIG_READY
                     0.071
      get_big_mid: &JOINT3_GET_BIG_MID
                      -0.281
      get_big_side: &JOINT3_GET_BIG_SIDE
                     -0.199
      big_pull_out: &JOINT3_BIG_PULL_OUT
                     0.188
      big_arm_up: &JOINT3_BIG_ARM_UP
                    0.291

  joint4:
    mechanical:
      left_position: &JOINT4_L_POSITION
                       1.00
      mid_position: &JOINT4_MID_POSITION
                      0.001
      right_position: &JOINT4_R_POSITION
                        -1.495
      small_ready_second: &JOINT4_SMALL_READY_SECOND
                        -0.777
  joint5:
    mechanical:
      mid_position: &JOINT5_MID_POSITION
                      0.011
      left_90_position: &JOINT5_L90_POSITION
                          -1.54
      right_90_position: &JOINT5_R90_POSITION
                           1.59
      bin_get_stone: &JOINT5_BIN_GET_STONE
                           1.679
      big_ready: &JOINT5_BIG_READY
                  -0.017
      big_store: &JOINT5_BIG_STORE
                  1.617

  joint6:
    mechanical:
      mid_position: &JOINT6_MID_POSITION
                      0.001
      up_position: &JOINT6_UP_POSITION
                     -1.569
      down_position: &JOINT6_DOWN_POSITION
                       1.569
      small_ready_second: &JOINT6_SMALL_READY_SECOND
                       0.694
      bin_get_stone: &JOINT6_BIN_GET_STONE
                      -1.611
      big_ready: &JOINT6_BIG_READY
                       0.014
      big_adjust_mid: &JOINT6_BIG_ADJUST_MID
                       -0.119
      big_arm_up: &JOINT6_BIG_ARM_UP
                       -1.519

  joint7:
    mechanical:
      mid_position: &JOINT7_MID_POSITION
                      0.044
      left_90_position: &JOINT7_L90_POSITION
                          -1.59
      right_90_position: &JOINT7_R90_POSITION
                           1.62
      big_pos: &JOINT7_BIG_POS
                         -0.013

  gimbal:
    side_pos: &SIDE_POS
      frame: gimbal_lifter
      position: [ 0.001 , -3, 0. ]
    front_pos: &FRONT_POS
      frame: gimbal_lifter
      position: [ 2, 0.001, 0. ]
    small_island_pos: &SMALL_ISLAND_POS
      frame: gimbal_lifter
      position: [ 1, -1, 0.]

  gimbal_lifter:
    button_pos: &BUTTON_POS
      0.07
    small_island: &LIFTER_SMALL_ISLAND
      0.1
    mid_pos: &MID_POS
      0.14
    big_island: &LIFTER_BIG_ISLAND
      0.260
    two_stone_pos: &TWO_STONE_POS
      0.163
    tallest_pos: &TALLEST_POS
      0.394

  gripper:
    open_gripper: &OPEN_GRIPPER
      pin: 0
      state: true
    close_gripper: &CLOSE_GRIPPER
      pin: 0
      state: false

  arm:
    home: &HOME_1
      joints: [ "VARIABLE", *JOINT2_BACK_POSITION, *JOINT3_HOME_POS, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
      common:
        <<: *NORMALLY
      tolerance:
        <<: *NORMAL_TOLERANCE


  chassis_move:
    chassis_left_315: &CHASSIS_LEFT_15
      frame: base_link
      position: [ 0., 15. ]
      yaw: 0.0
      chassis_tolerance_position: 0.1
      chassis_tolerance_angular: 0.3
      common:
        timeout: 2.
    chassis_180: &CHASSIS_180
      frame: base_link
      position: [ 0., 0. ]
      yaw: 2.80
      chassis_tolerance_position: 0.1
      chassis_tolerance_angular: 0.2
      common:
        timeout: 2.

  ore_rotator:
    ready_pos: &READY_POS
            0.001
    exchange_pos: &EXCHANGE_POS
            1.59

  ore_lifter:
    bin_up_pos: &BIN_UP_POS
            0.2
    bin_mid_pos: &BIN_MID_POS
            0.1
    bin_down_pos: &BIN_DOWN_POS
            0.001
  extend_arm:
    close: &EX_CLOSE
          0.0
    open: &EX_OPEN
          2.6

steps_list:
  EXCHANGE_POS:
    - step: "gimbal look front"
      gimbal:
        <<: *FRONT_POS
    - step: "move arm"
      arm:
        joints: [*JOINT1_DOWN_POSITION, *JOINT2_EXCHANGE_POSITION, *JOINT3_MID_POSITION, *JOINT4_MID_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "gimbal lifter tallest"
      gimbal_lifter:
        target: *TALLEST_POS

  GIMBAL_FRONT:
    - step: "gimbal look front"
      gimbal:
        <<: *FRONT_POS
  GIMBAL_LEFT:
    - step: "gimbal look left"
      gimbal:
        <<: *SIDE_POS
  ############ MID #############

  ############################ HOME ##########################
  HOME_ZERO_STONE:
    - step: "gimbal look front"
      gimbal:
        <<: *FRONT_POS
    - step: "gimbal lifter down"
      gimbal_lifter:
        target: *BUTTON_POS
    - step: "close ex arm"
      extend_arm_front:
        front: *EX_CLOSE
        back: *EX_CLOSE
    - step: "close gripper"
      gripper:
        <<: *CLOSE_GRIPPER
    - step: "ORE_ROTATOR_READY"
      ore_rotator:
        target: *READY_POS
    - step: "ORE_LIFTER_UP"
      ore_lifter:
        target: *BIN_DOWN_POS
    - step: "home with no stone"
      arm:
        <<: *HOME_1
        variable: [ *JOINT1_ZERO_STONE_POSITION, 0, 0, 0, 0, 0 ]
  HOME_ONE_STONE:
    - step: "gimbal look front"
      gimbal:
        <<: *FRONT_POS
    - step: "gimbal lifter down"
      gimbal_lifter:
        target: *MID_POS
    - step: "close ex arm"
      extend_arm_front:
        front: *EX_CLOSE
        back: *EX_CLOSE
    - step: "close gripper"
      gripper:
        <<: *CLOSE_GRIPPER
    - step: "ORE_ROTATOR_READY"
      ore_rotator:
        target: *READY_POS
    - step: "ORE_LIFTER_UP"
      ore_lifter:
        target: *BIN_DOWN_POS
    - step: "home with one stone"
      arm:
        <<: *HOME_1
        variable: [ *JOINT1_ZERO_STONE_POSITION, 0, 0, 0, 0, 0 ]
  HOME_TWO_STONE:
    - step: "gimbal look front"
      gimbal:
        <<: *FRONT_POS
    - step: "gimbal lifter down"
      gimbal_lifter:
        target: *MID_POS
    - step: "close ex arm"
      extend_arm_front:
        front: *EX_CLOSE
        back: *EX_CLOSE
    - step: "close gripper"
      gripper:
        <<: *CLOSE_GRIPPER
    - step: "ORE_ROTATOR_READY"
      ore_rotator:
        target: *READY_POS
    - step: "ORE_LIFTER_UP"
      ore_lifter:
        target: *BIN_DOWN_POS
    - step: "home with two stone"
      arm:
        <<: *HOME_1
        variable: [ *JOINT1_ZERO_STONE_POSITION, 0, 0, 0, 0, 0 ]

  OPEN_GRIPPER:
    - step: "open gripper"
      gripper:
        <<: *OPEN_GRIPPER
  CLOSE_GRIPPER:
    - step: "close gripper"
      gripper:
        <<: *CLOSE_GRIPPER

  ################### SMALL_ISLAND_FROM_SIDE ################
  ########ONE_STONE_ONCE#########
  HAS0_ONE_STONE_SMALL_ISLAND:
    - step: "GIMBAL_READY"
      gimbal:
        <<: *SMALL_ISLAND_POS
    - step: "ORE_ROTATOR_READY"
      ore_rotator:
        target: *READY_POS
    - step: "ORE_LIFTER_READY"
      ore_lifter:
        target: *BIN_MID_POS
    - step: "SMALL_ARM_READY"
      arm:
        joints: [ *JOINT1_DOWN_POSITION, *JOINT2_BACK_POSITION, *JOINT3_SMALL_READY, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_MID_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE

    - step: "OPEN_GRIPPER"
      gripper:
        <<: *OPEN_GRIPPER
  HAS0_ONE_STONE_SMALL_ISLAND0:
    - step: "SMALL_ARM_READY"
      arm:
        joints: [ *JOINT1_SMALL_READY, *JOINT2_BACK_POSITION, *JOINT3_SMALL_READY, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_MID_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "SMALL_GET_STONE"
      arm:
        joints: [ *JOINT1_SMALL_READY, *JOINT2_BACK_POSITION, *JOINT3_SMALL_GET_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_MID_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "JOINT1_UP AND BACK"
      arm:
        joints: [ *JOINT1_UP_POS, "KEEP", *JOINT3_SMALL_GET_STONE2, "KEEP", "KEEP", "KEEP", "KEEP"]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "SMALL_ARM_UP_STONE"
      arm:
        joints: [ *JOINT1_UP_POS, *JOINT2_SMALL_ARM_UP, *JOINT3_SMALL_GET_STONE2, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "READY_TO_STORE_STONE"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_ARM_UP, *JOINT3_SMALL_STORE_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *SMALL_TOLERANCE
    - step: "STORE_STONE"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_STORE_STONE, *JOINT3_SMALL_STORE_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *SMALL_TOLERANCE
    - step: "JOINT5_TURN"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_STORE_STONE, *JOINT3_SMALL_STORE_STONE, *JOINT4_R_POSITION, *JOINT5_R90_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *SMALL_TOLERANCE
    - step: "CLOSE_GRIPPER"
      gripper:
        <<: *CLOSE_GRIPPER
    - step: "ARM_RESET"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_STORE_STONE, *JOINT3_L_POSITION, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_MID_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "home"
      arm:
        joints: [ *JOINT1_ZERO_STONE_POSITION, *JOINT2_BACK_POSITION, *JOINT3_HOME_POS, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ORE_LIFTER_DOWN"
      ore_lifter:
        target: *BIN_DOWN_POS
    - step: "add stone"
      stone_num:
        change: "+1"
    - step: "GIMBAL_READY"
      gimbal:
        <<: *FRONT_POS

  HAS1_ONE_STONE_SMALL_ISLAND:
    - step: "GIMBAL_READY"
      gimbal:
        <<: *SMALL_ISLAND_POS
    - step: "ORE_ROTATOR_READY"
      ore_rotator:
        target: *READY_POS
    - step: "ORE_LIFTER_READY"
      ore_lifter:
        target: *BIN_DOWN_POS
    - step: "SMALL_ARM_READY"
      arm:
        joints: [ *JOINT1_DOWN_POSITION, *JOINT2_BACK_POSITION, *JOINT3_SMALL_READY, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_MID_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE

    - step: "OPEN_GRIPPER"
      gripper:
        <<: *OPEN_GRIPPER
  ONE_STONE_SMALL_ISLAND0:
    - step: "SMALL_ARM_READY"
      arm:
        joints: [ *JOINT1_SMALL_READY, *JOINT2_BACK_POSITION, *JOINT3_SMALL_READY, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_MID_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "SMALL_GET_STONE"
      arm:
        joints: [ *JOINT1_SMALL_READY, *JOINT2_BACK_POSITION, *JOINT3_SMALL_GET_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_MID_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "JOINT1_UP"
      arm:
        joints: [ *JOINT1_UP_POS, "KEEP", "KEEP", "KEEP", "KEEP", "KEEP", "KEEP"]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "SMALL_ARM_UP_STONE"
      arm:
        joints: [ *JOINT1_UP_POS, *JOINT2_SMALL_ARM_UP, *JOINT3_SMALL_GET_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "READY_TO_STORE_STONE"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_ARM_UP, *JOINT3_SMALL_STORE_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *SMALL_TOLERANCE
    - step: "STORE_STONE"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_STORE_STONE, *JOINT3_SMALL_STORE_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *SMALL_TOLERANCE
    - step: "JOINT5_TURN"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_STORE_STONE, *JOINT3_SMALL_STORE_STONE, *JOINT4_R_POSITION, *JOINT5_R90_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *SMALL_TOLERANCE
    - step: "CLOSE_GRIPPER"
      gripper:
        <<: *CLOSE_GRIPPER
    - step: "ARM_RESET"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_STORE_STONE, *JOINT3_L_POSITION, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_MID_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "home"
      arm:
        joints: [ *JOINT1_ZERO_STONE_POSITION, *JOINT2_BACK_POSITION, *JOINT3_HOME_POS, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "add stone"
      stone_num:
        change: "+1"
    - step: "GIMBAL_READY"
      gimbal:
        <<: *FRONT_POS
  ##########TWO_STONE_ONCE###########
  ####FIRST_STONE###
  TWO_STONE_SMALL_ISLAND:
    - step: "GIMBAL_READY"
      gimbal:
        <<: *SMALL_ISLAND_POS
    - step: "ORE_ROTATOR_READY"
      ore_rotator:
        target: *READY_POS
    - step: "ORE_LIFTER_READY"
      ore_lifter:
        target: *BIN_MID_POS
    - step: "SMALL_ARM_READY"
      arm:
        joints: [ *JOINT1_DOWN_POSITION, *JOINT2_BACK_POSITION, *JOINT3_SMALL_READY, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_MID_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "OPEN_GRIPPER"
      gripper:
        <<: *OPEN_GRIPPER
  TWO_STONE_SMALL_ISLAND0:
    - step: "SMALL_ARM_READY"
      arm:
        joints: [ *JOINT1_SMALL_READY, *JOINT2_BACK_POSITION, *JOINT3_SMALL_READY, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_MID_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "SMALL_GET_STONE"
      arm:
        joints: [ *JOINT1_SMALL_READY, *JOINT2_BACK_POSITION, *JOINT3_SMALL_GET_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_MID_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "JOINT1_UP"
      arm:
        joints: [ *JOINT1_UP_POS, "KEEP", "KEEP", "KEEP", "KEEP", "KEEP", "KEEP"]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "SMALL_ARM_UP_STONE"
      arm:
        joints: [ *JOINT1_UP_POS, *JOINT2_SMALL_ARM_UP, *JOINT3_SMALL_GET_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "READY_TO_STORE_STONE"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_ARM_UP, *JOINT3_SMALL_STORE_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *SMALL_TOLERANCE
    - step: "STORE_STONE"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_STORE_STONE, *JOINT3_SMALL_STORE_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *SMALL_TOLERANCE
    - step: "JOINT5_TURN"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_STORE_STONE, *JOINT3_SMALL_STORE_STONE, *JOINT4_R_POSITION, *JOINT5_R90_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *SMALL_TOLERANCE
    - step: "CLOSE_GRIPPER"
      gripper:
        <<: *CLOSE_GRIPPER
    - step: "ARM_RESET"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_STORE_STONE, *JOINT3_L_POSITION, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_MID_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ORE_LIFTER_DOWN"
      ore_lifter:
        target: *BIN_DOWN_POS
    - step: "add stone"
      stone_num:
        change: "+1"
  ###SECOND_STONE###
  TWO_STONE_SMALL_ISLAND00:
    - step: "SMALL_ARM_READY_TWO"
      arm:
        joints: [ *JOINT1_SMALL_READY, *JOINT2_SMALL_READY_SECOND, *JOINT3_SMALL_READY_SECOND, *JOINT4_SMALL_READY_SECOND, *JOINT5_L90_POSITION, *JOINT6_SMALL_READY_SECOND, *JOINT7_R90_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "OPEN_GRIPPER"
      gripper:
        <<: *OPEN_GRIPPER
  TWO_STONE_SMALL_ISLAND000:
    - step: "SMALL_GET_STONE_TWO"
      arm:
        joints: [ *JOINT1_SMALL_READY, *JOINT2_SMALL_READY_SECOND, *JOINT3_SMALL_GET_SECOND, *JOINT4_SMALL_READY_SECOND, *JOINT5_L90_POSITION, *JOINT6_SMALL_READY_SECOND, *JOINT7_R90_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *SMALL_TOLERANCE
    - step: "JOINT1_UP"
      arm:
        joints: [ *JOINT1_UP_POS, "KEEP", "KEEP", "KEEP", "KEEP", "KEEP", "KEEP"]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "SMALL_ARM_LIFT_STONE"
      arm:
        joints: [ *JOINT1_UP_POS, *JOINT2_SMALL_ARM_UP, *JOINT3_SMALL_GET_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "READY_TO_STORE_STONE"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_ARM_UP, *JOINT3_SMALL_STORE_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *SMALL_TOLERANCE
    - step: "STORE_STONE"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_STORE_STONE, *JOINT3_SMALL_STORE_STONE, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *SMALL_TOLERANCE
    - step: "JOINT5"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_STORE_STONE, *JOINT3_SMALL_STORE_STONE, *JOINT4_R_POSITION, *JOINT5_R90_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *SMALL_TOLERANCE
    - step: "CLOSE_GRIPPER"
      gripper:
        <<: *CLOSE_GRIPPER
    - step: "ARM_RESET"
      arm:
        joints: [ *JOINT1_SMALL_READY_STORE, *JOINT2_SMALL_STORE_STONE, *JOINT3_L_POSITION, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_MID_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "home"
      arm:
        joints: [ *JOINT1_ZERO_STONE_POSITION, *JOINT2_BACK_POSITION, *JOINT3_HOME_POS, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "add stone"
      stone_num:
        change: "+1"

  GET_DOWN_STONE_BIN:
    - step: "GIMBAL_READY"
      gimbal:
        <<: *FRONT_POS
    - step: "ORE_ROTATOR_READY"
      ore_rotator:
        target: *EXCHANGE_POS
    - step: "ORE_LIFTER_UP"
      ore_lifter:
        target: *BIN_UP_POS
    - step: "READY_TO_GET"
      arm:
        joints: [ *JOINT1_BIN_GET_STONE, *JOINT2_BIN_GET_STONE, *JOINT3_BIN_GET_STONE, *JOINT4_R_POSITION, *JOINT5_BIN_GET_STONE, *JOINT6_BIN_GET_STONE, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "OPEN_GRIPPER"
      gripper:
        <<: *OPEN_GRIPPER
    - step: "JOINT2_BACK_GET_STONE"
      arm:
        joints: [ "KEEP", *JOINT2_BACK_BIN_POSITION, "KEEP", "KEEP", "KEEP", "KEEP", "KEEP" ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "JOINT1_UP"
      arm:
        joints: [ *JOINT1_UP_POS, "KEEP", "KEEP", "KEEP", "KEEP", "KEEP", "KEEP" ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "JOINT5_LIFT_STONE"
      arm:
        joints: [ "KEEP", "KEEP", "KEEP", "KEEP", *JOINT5_MID_POSITION, "KEEP", "KEEP" ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "exchange pos"
      arm:
        joints: [ *JOINT1_DOWN_POSITION, *JOINT2_EXCHANGE_POSITION, *JOINT3_MID_POSITION, *JOINT4_MID_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "gimbal lifter tallest"
      gimbal_lifter:
        target: *TALLEST_POS
    - step: "remove stone"
      stone_num:
        change: "-1"

  GET_UP_STONE_BIN:
    - step: "GIMBAL_READY"
      gimbal:
        <<: *FRONT_POS
    - step: "ORE_ROTATOR_READY"
      ore_rotator:
        target: *EXCHANGE_POS
    - step: "READY_TO_GET"
      arm:
        joints: [ *JOINT1_BIN_GET_STONE, *JOINT2_BIN_GET_STONE, *JOINT3_BIN_GET_STONE, *JOINT4_R_POSITION, *JOINT5_BIN_GET_STONE, *JOINT6_BIN_GET_STONE, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "OPEN_GRIPPER"
      gripper:
        <<: *OPEN_GRIPPER
    - step: "JOINT2_BACK_GET_STONE"
      arm:
        joints: [ "KEEP", *JOINT2_BACK_BIN_POSITION, "KEEP", "KEEP", "KEEP", "KEEP", "KEEP" ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "JOINT1_UP"
      arm:
        joints: [ *JOINT1_UP_POS, "KEEP", "KEEP", "KEEP", "KEEP", "KEEP", "KEEP" ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "JOINT5_LIFT_STONE"
      arm:
        joints: [ "KEEP", "KEEP", "KEEP", "KEEP", *JOINT5_MID_POSITION, "KEEP", "KEEP" ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "exchange pos"
      arm:
        joints: [ *JOINT1_DOWN_POSITION, *JOINT2_EXCHANGE_POSITION, *JOINT3_MID_POSITION, *JOINT4_MID_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "gimbal lifter tallest"
      gimbal_lifter:
        target: *TALLEST_POS
    - step: "remove stone"
      stone_num:
        change: "-1"

  #################BIG_ISLAND#############
  ######MID_STONE#######
  HAS0_MID_BIG_ISLAND:
    - step: "gimbal ready"
      gimbal:
        <<: *SMALL_ISLAND_POS
    - step: "open ex arm"
      extend_arm:
        front: *EX_OPEN
        back: *EX_OPEN
    - step: "MID_ARM_READY"
      arm:
        joints: [ *JOINT1_BIG_READY, *JOINT2_BIG_READY, *JOINT3_BIG_READY, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_READY, *JOINT7_BIG_POS ]
        common:
         <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ORE_ROTATOR_READY"
      ore_rotator:
        target: *READY_POS
    - step: "ORE_LIFTER_READY"
      ore_lifter:
        target: *BIN_MID_POS
    - step: "gimbal lifter"
      gimbal_lifter:
        target: *LIFTER_BIG_ISLAND
    - step: "OPEN_GRIPPER"
      gripper:
        <<: *OPEN_GRIPPER
  HAS0_MID_BIG_ISLAND0:
    - step: "GET_MID_STONE"
      arm:
        joints: [ *JOINT1_BIG_READY, *JOINT2_BIG_READY, *JOINT3_GET_BIG_MID, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_READY, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ADJUST_STONE"
      arm:
        joints: [ *JOINT1_BIG_ADJUST_MID, *JOINT2_BIG_READY, *JOINT3_GET_BIG_MID, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_ADJUST_MID, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "PULL_OUT_STONE"
      arm:
        joints: [ "KEEP", "KEEP", *JOINT3_BIG_PULL_OUT, "KEEP", "KEEP", "KEEP", "KEEP" ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
#    - step: "chassis move left"
#      chassis:
#        <<: *CHASSIS_LEFT_15
    - step: "JOINT1_UP"
      arm:
        joints: [ *JOINT1_BIG_UP_POS, "KEEP", "KEEP", "KEEP", "KEEP", "KEEP", "KEEP" ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ARM_UP_STONE"
      arm:
        joints: [ *JOINT1_BIG_UP_POS, *JOINT2_BIG_ARM_UP, *JOINT3_BIG_ARM_UP, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_ARM_UP, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "READY_TO_STORE"
      arm:
        joints: [ *JOINT1_BIG_READY_STORE, *JOINT2_BIG_READY_STORE, *JOINT3_BIG_ARM_UP, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_ARM_UP, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "STORE_STONE"
      arm:
        joints: [ *JOINT1_BIG_READY_STORE, *JOINT2_BIG_READY_STORE, *JOINT3_BIG_ARM_UP, *JOINT4_R_POSITION, *JOINT5_BIG_STORE, *JOINT6_BIG_ARM_UP, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "CLOSE_GRIPPER"
      gripper:
        <<: *CLOSE_GRIPPER
    - step: "move arm out"
      arm:
        joints: [ *JOINT1_DOWN_POSITION, *JOINT2_BACK_POSITION, "KEEP", *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "home"
      arm:
        joints: [ *JOINT1_ZERO_STONE_POSITION, *JOINT2_BACK_POSITION, *JOINT3_HOME_POS, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ORE_LIFTER_DOWN"
      ore_lifter:
        target: *BIN_DOWN_POS
    - step: "add stone"
      stone_num:
        change: "+1"
    - step: "gimbal front"
      gimbal:
        <<: *FRONT_POS


  HAS1_MID_BIG_ISLAND:
    - step: "gimbal ready"
      gimbal:
        <<: *SMALL_ISLAND_POS
    - step: "open ex arm"

      extend_arm:
        front: *EX_OPEN
        back: *EX_OPEN
    - step: "MID_ARM_READY"
      arm:
        joints: [ *JOINT1_BIG_READY, *JOINT2_BIG_READY, *JOINT3_BIG_READY, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_READY, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ORE_ROTATOR_READY"
      ore_rotator:
        target: *READY_POS
    - step: "ORE_LIFTER_READY"
      ore_lifter:
        target: *BIN_DOWN_POS
    - step: "gimbal lifter"
      gimbal_lifter:
        target: *LIFTER_BIG_ISLAND
    - step: "OPEN_GRIPPER"
      gripper:
        <<: *OPEN_GRIPPER
  HAS1_MID_BIG_ISLAND0:
    - step: "GET_MID_STONE"
      arm:
        joints: [ *JOINT1_BIG_READY, *JOINT2_BIG_READY, *JOINT3_GET_BIG_MID, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_READY, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ADJUST_STONE"
      arm:
        joints: [ *JOINT1_BIG_ADJUST_MID, *JOINT2_BIG_READY, *JOINT3_GET_BIG_MID, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_ADJUST_MID, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "PULL_OUT_STONE"
      arm:
        joints: [ "KEEP", "KEEP", *JOINT3_BIG_PULL_OUT, "KEEP", "KEEP", "KEEP", "KEEP" ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    #    - step: "chassis move left"
    #      chassis:
    #        <<: *CHASSIS_LEFT_15
    - step: "JOINT1_UP"
      arm:
        joints: [ *JOINT1_BIG_UP_POS, "KEEP", "KEEP", "KEEP", "KEEP", "KEEP", "KEEP" ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ARM_UP_STONE"
      arm:
        joints: [ *JOINT1_BIG_UP_POS, *JOINT2_BIG_ARM_UP, *JOINT3_BIG_ARM_UP, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_ARM_UP, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "READY_TO_STORE"
      arm:
        joints: [ *JOINT1_BIG_READY_STORE, *JOINT2_BIG_READY_STORE, *JOINT3_BIG_ARM_UP, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_ARM_UP, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "STORE_STONE"
      arm:
        joints: [ *JOINT1_BIG_READY_STORE, *JOINT2_BIG_READY_STORE, *JOINT3_BIG_ARM_UP, *JOINT4_R_POSITION, *JOINT5_BIG_STORE, *JOINT6_BIG_ARM_UP, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "CLOSE_GRIPPER"
      gripper:
        <<: *CLOSE_GRIPPER
    - step: "move arm out"
      arm:
        joints: [ *JOINT1_DOWN_POSITION, *JOINT2_BACK_POSITION, "KEEP", *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "home"
      arm:
        joints: [ *JOINT1_ZERO_STONE_POSITION, *JOINT2_BACK_POSITION, *JOINT3_HOME_POS, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "add stone"
      stone_num:
        change: "+1"
    - step: "gimbal front"
      gimbal:
        <<: *FRONT_POS
  ########SIDE_STONE#########
  HAS0_SIDE_BIG_ISLAND:
    - step: "gimbal ready"
      gimbal:
        <<: *SMALL_ISLAND_POS
    - step: "open ex arm"
      extend_arm:
        front: *EX_OPEN

    - step: "MID_ARM_READY"
      arm:
        joints: [ *JOINT1_BIG_READY, *JOINT2_BIG_READY, *JOINT3_BIG_READY, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_READY, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ORE_ROTATOR_READY"
      ore_rotator:
        target: *READY_POS
    - step: "ORE_LIFTER_READY"
      ore_lifter:
        target: *BIN_MID_POS
    - step: "gimbal lifter"
      gimbal_lifter:
        target: *LIFTER_BIG_ISLAND
    - step: "OPEN_GRIPPER"
      gripper:
        <<: *OPEN_GRIPPER

  HAS0_SIDE_BIG_ISLAND0:
    - step: "GET_MID_STONE"
      arm:
        joints: [ *JOINT1_BIG_READY, *JOINT2_BIG_READY, *JOINT3_GET_BIG_SIDE, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_READY, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ADJUST_STONE"
      arm:
        joints: [ *JOINT1_BIG_ADJUST_MID, *JOINT2_BIG_READY, *JOINT3_GET_BIG_SIDE, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_ADJUST_MID, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "PULL_OUT_STONE"
      arm:
        joints: [ "KEEP", "KEEP", *JOINT3_BIG_PULL_OUT, "KEEP", "KEEP", "KEEP", "KEEP" ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    #    - step: "chassis move left"
    #      chassis:
    #        <<: *CHASSIS_LEFT_15
    - step: "JOINT1_UP"
      arm:
        joints: [ *JOINT1_BIG_UP_POS, "KEEP", "KEEP", "KEEP", "KEEP", "KEEP", "KEEP" ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ARM_UP_STONE"
      arm:
        joints: [ *JOINT1_BIG_UP_POS, *JOINT2_BIG_ARM_UP, *JOINT3_BIG_ARM_UP, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_ARM_UP, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "READY_TO_STORE"
      arm:
        joints: [ *JOINT1_BIG_READY_STORE, *JOINT2_BIG_READY_STORE, *JOINT3_BIG_ARM_UP, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_ARM_UP, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "STORE_STONE"
      arm:
        joints: [ *JOINT1_BIG_READY_STORE, *JOINT2_BIG_READY_STORE, *JOINT3_BIG_ARM_UP, *JOINT4_R_POSITION, *JOINT5_BIG_STORE, *JOINT6_BIG_ARM_UP, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "CLOSE_GRIPPER"
      gripper:
        <<: *CLOSE_GRIPPER
    - step: "move arm out"
      arm:
        joints: [ *JOINT1_DOWN_POSITION, *JOINT2_BACK_POSITION, "KEEP", *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "home"
      arm:
        joints: [ *JOINT1_ZERO_STONE_POSITION, *JOINT2_BACK_POSITION, *JOINT3_HOME_POS, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ORE_LIFTER_DOWN"
      ore_lifter:
        target: *BIN_DOWN_POS
    - step: "add stone"
      stone_num:
        change: "+1"
    - step: "gimbal front"
      gimbal:
        <<: *FRONT_POS

  HAS1_SIDE_BIG_ISLAND:
    - step: "gimbal ready"
      gimbal:
        <<: *SMALL_ISLAND_POS
    - step: "open ex arm"
      extend_arm:
        front: *EX_OPEN
    - step: "MID_ARM_READY"
      arm:
        joints: [ *JOINT1_BIG_READY, *JOINT2_BIG_READY, *JOINT3_BIG_READY, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_READY, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ORE_ROTATOR_READY"
      ore_rotator:
        target: *READY_POS
    - step: "ORE_LIFTER_READY"
      ore_lifter:
        target: *BIN_DOWN_POS
    - step: "gimbal lifter"
      gimbal_lifter:
        target: *LIFTER_BIG_ISLAND
    - step: "OPEN_GRIPPER"
      gripper:
        <<: *OPEN_GRIPPER
  HAS1_SIDE_BIG_ISLAND0:
    - step: "GET_MID_STONE"
      arm:
        joints: [ *JOINT1_BIG_READY, *JOINT2_BIG_READY, *JOINT3_GET_BIG_SIDE, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_READY, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ADJUST_STONE"
      arm:
        joints: [ *JOINT1_BIG_ADJUST_MID, *JOINT2_BIG_READY, *JOINT3_GET_BIG_SIDE, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_ADJUST_MID, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "PULL_OUT_STONE"
      arm:
        joints: [ "KEEP", "KEEP", *JOINT3_BIG_PULL_OUT, "KEEP", "KEEP", "KEEP", "KEEP" ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    #    - step: "chassis move left"
    #      chassis:
    #        <<: *CHASSIS_LEFT_15
    - step: "JOINT1_UP"
      arm:
        joints: [ *JOINT1_BIG_UP_POS, "KEEP", "KEEP", "KEEP", "KEEP", "KEEP", "KEEP" ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "ARM_UP_STONE"
      arm:
        joints: [ *JOINT1_BIG_UP_POS, *JOINT2_BIG_ARM_UP, *JOINT3_BIG_ARM_UP, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_ARM_UP, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "READY_TO_STORE"
      arm:
        joints: [ *JOINT1_BIG_READY_STORE, *JOINT2_BIG_READY_STORE, *JOINT3_BIG_ARM_UP, *JOINT4_R_POSITION, *JOINT5_BIG_READY, *JOINT6_BIG_ARM_UP, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "STORE_STONE"
      arm:
        joints: [ *JOINT1_BIG_READY_STORE, *JOINT2_BIG_READY_STORE, *JOINT3_BIG_ARM_UP, *JOINT4_R_POSITION, *JOINT5_BIG_STORE, *JOINT6_BIG_ARM_UP, *JOINT7_BIG_POS ]
        common:
          <<: *SLOWLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "CLOSE_GRIPPER"
      gripper:
        <<: *CLOSE_GRIPPER
    - step: "move arm out"
      arm:
        joints: [ *JOINT1_DOWN_POSITION, *JOINT2_BACK_POSITION, "KEEP", *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "home"
      arm:
        joints: [ *JOINT1_ZERO_STONE_POSITION, *JOINT2_BACK_POSITION, *JOINT3_HOME_POS, *JOINT4_R_POSITION, *JOINT5_MID_POSITION, *JOINT6_UP_POSITION, *JOINT7_MID_POSITION ]
        common:
          <<: *NORMALLY
        tolerance:
          <<: *NORMAL_TOLERANCE
    - step: "add stone"
      stone_num:
        change: "+1"
    - step: "gimbal front"
      gimbal:
        <<: *FRONT_POS

  ####################################################  TEST  ##########################################################

  ########## EXCHANGE ############
  OLD_EXCHANGE_SPHERE:
    - step: "close to a sphere"
      arm:
        frame: exchanger
        xyz: [ -0.4, 0., -0.25 ]
        rpy: [ 0., 0., 0. ]
        rpy_rectify: [ 0.01,0.1,0.03 ]
        drift_dimensions: [ true, true, true, true, true, true ]
        tolerance_position: 0.1
        tolerance_orientation: 0.01
        spacial_shape: SPHERE
        radius: 0.5
        point_resolution: 0.5
        max_planning_times: 1
        common:
          <<: *QUICKLY

  EXCHANGE_DOWN:
    - step: "test new exchange"
      arm:
        frame: exchanger
        is_refer_planning_frame: true
        xyz: [ -0.3, 0.2, -0.2 ]
        rpy: [ 0., -1.5707963, 0. ]
        drift_dimensions: [ true, true, true, true, true, true ]
        tolerance_position: 0.01
        tolerance_orientation: 0.001
        spacial_shape: SPHERE
        radius: 0.3
        point_resolution: 0.5
        max_planning_times: 1
        common:
          <<: *NORMALLY

  TEST_ORI:
    - step: "ori test"
      arm:
        frame: exchanger
        rpy: [ 0., -1.5707963, 0. ]
        tolerance_orientation: 0.001

  TEST_ORI2:
    - step: "ori test2"
      arm:
        frame: exchanger
        rpy: [ 0., -1.5707963, 0. ]
        xyz: [ -0.3, 0.2, -0.2 ]
        tolerance_position: 0.01
        tolerance_orientation: 0.001

  EXCHANGE_ORI:
    - step: "test new exchange"
      arm:
        frame: exchanger
        is_refer_planning_frame: true
        rpy: [ 0., -1.5707963, 0. ]
        drift_dimensions: [ true, true, true, true, true, true ]
        tolerance_position: 0.01
        tolerance_orientation: 0.001
        spacial_shape: SPHERE
        radius: 0.5
        point_resolution: 0.5
        max_planning_times: 1
        common:
          <<: *NORMALLY
  EXCHANGE_STRAIGHT:
    - step: "test new exchange"
      arm:
        frame: exchanger
        is_refer_planning_frame: true
        xyz: [ -0.3, 0., 0. ]
        rpy: [ 0., 3.1415926, 0. ]
        drift_dimensions: [ true, true, true, true, true, true ]
        tolerance_position: 0.01
        tolerance_orientation: 0.001
        spacial_shape: SPHERE
        radius: 0.5
        point_resolution: 0.5
        max_planning_times: 1
        common:
          <<: *NORMALLY


  GIMBAL_DOWN:
    - step: "gimbal lowest"
      gimbal_lifter:
        target: *BUTTON_POS

  GIMBAL_MID:
    - step: "gimbal mid"
      gimbal_lifter:
        target: *LIFTER_BIG_ISLAND

  GIMBAL_TALL:
    - step: "gimbal tall"
      gimbal_lifter:
        target: *TALLEST_POS

